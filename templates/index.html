<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hero Rolling Game - Home</title>
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
    <div class="home-container">
        <div class="hero-section">
            <div class="hero-icon">ğŸ›¡ï¸</div>
            <h1 class="main-title">Hero Rolling Game</h1>
            <p class="subtitle">Collect legendary heroes and build your ultimate team!</p>
        </div>

        <div class="action-cards">
            {% if current_user.is_authenticated %}
                <div class="card welcome-back">
                    <div class="card-icon">ğŸ‘‹</div>
                    <h2>Welcome back, {{ current_user.username }}!</h2>
                    <p>Ready to continue your adventure?</p>
                    <a href="{{url_for('dashboard')}}" class="btn btn-primary">Go to Dashboard</a>
                </div>
            {% else %}
                <div class="card">
                    <div class="card-icon">âœ¨</div>
                    <h2>New to the Game?</h2>
                    <p>Create your account and start collecting heroes today!</p>
                    <a href="{{url_for('register')}}" class="btn btn-primary">Register Now</a>
                </div>

                <div class="card">
                    <div class="card-icon">ğŸ”‘</div>
                    <h2>Already Have an Account?</h2>
                    <p>Login to access your hero collection and continue your journey!</p>
                    <a href="{{url_for('login')}}" class="btn btn-secondary">Login Here</a>
                </div>
            {% endif %}
        </div>

        <div class="features-section">
            <h3 class="features-title">What Awaits You</h3>
            <div class="features-grid">
                <div class="feature">
                    <div class="feature-icon">âš”ï¸</div>
                    <h4>Collect Heroes</h4>
                    <p>Roll for legendary heroes with unique abilities</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ¤</div>
                    <h4>Trade Heroes</h4>
                    <p>Exchange heroes with other players</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ†</div>
                    <h4>Earn Achievements</h4>
                    <p>Complete challenges and unlock rewards</p>
                </div>
            </div>
        </div>
    </div>

    <div class="v2-modal" id="v2Modal" aria-hidden="true">
        <div class="v2-modal__overlay"></div>
        <div class="v2-modal__content" role="dialog" aria-labelledby="v2ModalTitle">
            <button class="v2-modal__close" aria-label="Close announcement">Ã—</button>
            <p class="v2-modal__eyebrow">Update</p>
            <h2 id="v2ModalTitle">ğŸ”¥ Hero Collection V2 is live!</h2>
            <ul class="v2-modal__list">
                <li>New Arena Battle System</li>
                <li>Type Advantage + Synergy Combos</li>
                <li>Full Battle Logs + Turn-by-Turn Damage</li>
                <li>Queue Your Team to Be Challenged by Others</li>
                <li>Earn Tokens Through Battles (Winners + Losers)</li>
            </ul>
            <p class="v2-modal__footer">Thank you for playing â€” V2 is just the beginning.<br>V2.5 coming early 2026</p>
        </div>
    </div>

    <script>
        (() => {
            const modal = document.getElementById('v2Modal');
            if (!modal) return;

            const closeButton = modal.querySelector('.v2-modal__close');
            const overlay = modal.querySelector('.v2-modal__overlay');
            const storageKey = 'heroCollectionV2PopupSeen';

            const openModal = () => {
                modal.classList.add('is-open');
                modal.setAttribute('aria-hidden', 'false');
            };

            const closeModal = () => {
                modal.classList.remove('is-open');
                modal.setAttribute('aria-hidden', 'true');
                try {
                    localStorage.setItem(storageKey, 'true');
                } catch (err) {
                    // ignore storage errors
                }
            };

            let hasSeenPopup = false;
            try {
                hasSeenPopup = localStorage.getItem(storageKey) === 'true';
            } catch (err) {
                hasSeenPopup = false;
            }

            if (!hasSeenPopup) {
                openModal();
            }

            closeButton?.addEventListener('click', closeModal);
            overlay?.addEventListener('click', closeModal);
        })();
    </script>
</body>
</html>
